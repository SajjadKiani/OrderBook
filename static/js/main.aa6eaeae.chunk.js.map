{"version":3,"sources":["components/OrderbookHeader.jsx","types/index.js","components/OrderbookListItem.jsx","App.jsx","index.js"],"names":["OrderbookHeader","className","ORDER_TYPE","OrderbookListItem","index","type","price","total","amount","bgWidth","classnames","style","width","App","data","useState","buyOrders","setBuyOrders","sellOrders","setSellOrders","React","useEffect","socket","WebSocket","onopen","event","console","log","send","JSON","stringify","onmessage","message","document","createElement","textContent","parse","bids","asks","onerror","onclose","evens","close","calTotal","i","list","j","parseInt","calSum","sum","forEach","length","map","order","ReactDOM","render","basename","path","component","getElementById"],"mappings":"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","file":"static/js/main.aa6eaeae.chunk.js","sourcesContent":["import React from \"react\";\n\nfunction OrderbookHeader() {\n  return (\n    <div className=\"header\">\n      <div className=\"header-row1\">\n        <h2>Sell</h2>\n        <h2>Buy</h2>\n      </div>\n      <div className=\"header-row2\">\n        <span>Total (BTC)</span>\n        <span>Amount (BTC)</span>\n        <span>PRICE (USD)</span>\n        <span>Amount (BTC)</span>\n        <span>Total (BTC)</span>\n      </div>\n    </div>\n  );\n}\n\nexport default OrderbookHeader;\n","export const ORDER_TYPE = {\n  SELL: \"sell\",\n  BUY: \"buy\",\n};\n","import React from \"react\";\nimport classnames from \"classnames\";\nimport { ORDER_TYPE } from \"../types\";\n\nfunction OrderbookListItem({ index, type, price, total, amount, bgWidth }) {\n  return (\n    <div\n      data-testid={`orderbookRow-${type}-${index}`}\n      className={classnames(\"row\", {\n        \"sell-row\": type === ORDER_TYPE.SELL,\n        \"buy-row\": type === ORDER_TYPE.BUY,\n      })}\n    >\n      <div className=\"background\" style={{ width: bgWidth }} />\n      <span className=\"price\">{+price}</span>\n      <span className=\"quantity\">{+amount}</span>\n      <span className=\"total\">{+total}</span>\n    </div>\n  );\n}\n\nexport default OrderbookListItem;\n","import React, {useState} from \"react\";\nimport OrderbookHeader from \"./components/OrderbookHeader\";\nimport OrderbookListItem from \"./components/OrderbookListItem\";\n\nfunction App({ data }) {\n\n\n  const [buyOrders , setBuyOrders] = useState([])\n  const [sellOrders , setSellOrders] = useState([])\n\n    React.useEffect(() => {\n      const socket = new WebSocket(\"wss://ws.bitstamp.net\");\n\n      socket.onopen = function(event) {\n        console.log('open:');\n        console.log(event);\n\n        const apiCall = {\n          \"event\": \"bts:subscribe\",\n          \"data\": {\n            \"channel\": \"order_book_btcusd\"\n          }\n        }\n\n        socket.send(JSON.stringify(apiCall));\n      }\n\n      socket.onmessage = function(event) {\n        let message = event.data;\n\n        let messageElem = document.createElement('div');\n        messageElem.textContent = message;\n\n        if (JSON.parse(message).event !== 'bts:subscription_succeeded'){\n          setSellOrders(JSON.parse(message).data.bids);\n          setBuyOrders(JSON.parse(message).data.asks)\n        }\n\n        socket.onerror = function (event) {\n          console.log('event')\n          console.log(event)\n        }\n\n        socket.onclose = function (evens) {\n          console.log('close:')\n          console.log(event)\n        }\n      }\n\n      return () => {\n        socket.close(1000,'work end!')\n      }\n\n    },[])\n\n    const calTotal = (i,type) => {\n        let total = 0\n\n        const list = type ===  'sell' ? sellOrders : buyOrders;\n\n        for (let j = 0; j <= i; j++) {\n          total += parseInt(list[j][1])\n        }\n\n      return total\n    }\n\n    const calSum = (type) => {\n      let sum = 0\n      const list = type ===  'sell' ? sellOrders : buyOrders;\n      list.forEach(i => {sum += parseInt(i[1])})\n      return sum\n    }\n\n    React.useEffect(() => {\n      if (sellOrders.length) {\n\n      }\n    },[sellOrders])\n\n\n  return (\n    <div className=\"container\">\n      <h1 className={'info'}>Bitstamp Orderbook (BTC/USD)</h1>\n      <div className=\"wrapper\">\n        <OrderbookHeader />\n        <div className=\"table\">\n          <div className=\"sell-side side\">\n            {sellOrders.map((order,i) => {\n              const total = calTotal(i,'sell')\n              const sum = calSum('sell')\n              return <OrderbookListItem amount={order[1]} type={'sell'} price={order[0]} index={i} key={i} bgWidth={total*100/sum} total={total} />\n            })}\n          </div>\n          <div className=\"buy-side side\">\n            {buyOrders.map((order,i) => {\n              const total = calTotal(i,'buy')\n              const sum = calSum('buy')\n              return <OrderbookListItem amount={order[1]} type={'buy'} price={order[0]} index={i} key={i} bgWidth={total*100/sum} total={total}/>\n            })}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./styles/styles.css\";\nimport {BrowserRouter, Route, Switch} from \"react-router-dom\";\n\nReactDOM.render(\n    <BrowserRouter basename={'/OrderBook'}>\n        <Switch>\n            <Route path={'/'} component={App} />\n        </Switch>\n    </BrowserRouter>\n    ,document.getElementById(\"root\")\n);\n"],"sourceRoot":""}